<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>音标解释器</title>
		<link rel="stylesheet" href="style.css">
		<script src="main.js" type="text/javascript" charset="utf-8" async defer></script>
	</head>
	<body>
	<div class="group">
		<p class="word">word1</p>
		<p class="phonetic">pos1:phon1</p>
	</div>
	</body>
			<script type="text/javascript">
			<!--这是由Python字典直接dumps出的字符串-->
			refer_dict_str = '{\
				"word1":{"pos_phon":["pos1:phon1", "pos2:phon2,phon3"], "index":0},\
				"word2":{"pos_phon":["pos1:phon1", "pos2:phon2,phon3"], "index":0},\
				"word3":{"pos_phon":["pos1:phon1", "pos2:phon2,phon3"], "index":0}\
			}'
			json_object = JSON.parse(refer_dict_str);
			group_list = document.querySelectorAll(".group");
			for (var i = 0; i < group_list.length; i++) {
				console.log(group_list[i]);
				group_list[i].addEventListener("click", next);
			}
			function next(){
				target_word = this.querySelector(".word").innerHTML;
				length = json_object[target_word]["pos_phon"].length;
				index = json_object[target_word]["index"]
				index = (index+1) % (length);
				json_object[target_word]["index"] = index;
				this.querySelector(".phonetic").innerHTML = json_object[target_word]["pos_phon"][index]
				console.log(json_object[target_word]["pos_phon"][index]);
			}
		</script>
</html>